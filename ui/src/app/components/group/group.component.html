<div style="margin-top: 2em; " class="tui-container tui-container_adaptive" *ngIf="group; else joinorcreate">
    <div class="tui-row tui-row_adaptive">
        <div style="margin-bottom: 1em;" class="tui-col_lg-8 tui-col_md-8 tui-col_xs-12">
            <h2 class="headig_card" style="margin-bottom: 1em;">{{group.group_name}}</h2>
            <div class="wrapper">
                <p *ngIf="!group.lists.length">{{"Списки у данной группы отсутствуют" | uppercase}}</p>
                <a tuiIsland size="s" class="list_card" *ngFor="let list of group.lists" routerLink="/list/{{list.list_id}}">
                        <h3 class="headig_card">{{list.list_name}}</h3>
                        <p class="tui-island__paragraph">{{getSubj(list.subject_id)}}, Семестр {{list.semester}}</p>

                </a>

                <a tuiIsland size="s" class="list_card add_item" *ngIf="getAdmin()" (click)="!listCreation ? listCreation=true :addList()">
                    <h3>{{!listCreation ? 'Создать лист' : 'Подтвердить'}}</h3>
                </a>
                <tui-expand [expanded]="listCreation">
                    <ng-template tuiExpandContent>
                        <form [formGroup]="newList" class="creation" (ngSubmit)="onNewGroup()">
                            <tui-input formControlName="name" tuiTextfieldSize="m">
                                Название
                                <input
                                    placeholder="Название листа"
                                    tuiTextfield
                                    required
                                />
                            </tui-input>
                            <tui-input-number
                                formControlName="semester"
                                tuiTextfieldSize="m"
                            > Семестр
                                <input
                                    tuiTextfield
                                    placeholder="Семестр"
                                />
                            </tui-input-number>
                            <tui-select
                                tuiTextfieldSize="m"
                                formControlName="subject"
                                [valueContent]="SubContent"
                            > Предмет
                                <input
                                    placeholder="Предмет"
                                    tuiTextfield
                                />
                                <tui-data-list *tuiDataList>
                                    <button
                                        *ngFor="let item of subjects"
                                        tuiOption
                                        [value]="item.subject_id"
                                    >
                                        {{ item.subject_name }}
                                    </button>
                                </tui-data-list>

                                <ng-template #SubContent let-item>{{getSubj(item)}}</ng-template>
                            </tui-select>
                            <tui-select
                                tuiTextfieldSize="m"
                                formControlName="public"
                                [valueContent]="PubContent"
                            > Публиный
                                <input
                                    placeholder="Публичный"
                                    tuiTextfield
                                />
                                <tui-data-list *tuiDataList>
                                    <button
                                        *ngFor="let item of ['нет', 'да'], index as i"
                                        tuiOption
                                        [value]="i"
                                    >
                                        {{ item }}
                                    </button>
                                </tui-data-list>

                                <ng-template #PubContent let-item>{{item==0? 'нет' : 'да'}}</ng-template>
                            </tui-select>

                        </form>
                    </ng-template>
                </tui-expand>
            </div>

        </div>
        <div class="tui-col_lg-4 tui-col_md-4 tui-col_xs-12">
            <div size="s" class="filter_conteiner" >
                <h4 class="green headig_card" style="margin-bottom: 1em; text-transform: capitalize;">{{group.group_name}}</h4>
                <div class="grey">{{getFaculty(group.faculty_id)}}</div>
                <div class="grey">{{getProgram(group.program_id)}}</div>
                <div class="grey">Курс {{group.course}}</div>
                <p *ngFor="let mem of group.members">{{mem.user_fname + ' ' + mem.user_lname}}</p>
            </div>
            
        </div>
    </div>
</div>

<ng-template #joinorcreate>
    <div class="tui-container tui-container_adaptive">
        <div class="tui-row">
            <div class="tui-col_lg-8 tui-col_md-10 tui-col_xs-12 joc">
                <h1>Сейчас вы не состоите в группе</h1>
                <button tuiButton appearance="primary" size="m" (click)="!groupCreation ? onCreation() : onNewGroup()" [disabled]="groupCreation && newGroup.invalid">{{!groupCreation ? 'Создать группу' : 'Подтвердить'}}</button>
                <tui-expand [expanded]="groupCreation">
                    <ng-template tuiExpandContent>
                        <form [formGroup]="newGroup" class="creation" (ngSubmit)="onNewGroup()">
                            <tui-input formControlName="name" tuiTextfieldSize="m">
                                Название новой группы
                                <input
                                    tuiTextfield
                                    required
                                />
                            </tui-input>
                            <tui-input-number
                                formControlName="course"
                                tuiTextfieldSize="m"
                            >
                                Курс
                                <input
                                    tuiTextfield
                                    placeholder="Или год обучения"
                                />
                            </tui-input-number>
                            <tui-select
                                tuiTextfieldSize="m"
                                formControlName="faculty"
                                [valueContent]="facContent"
                            >
                                Факультет
                                <input
                                    tuiTextfield
                                />
                                <!-- [items]="faculties" -->
                                <tui-data-list *tuiDataList>
                                    <button
                                        *ngFor="let item of faculties"
                                        tuiOption
                                        [value]="item.faculty_id"
                                    >
                                        {{ item.faculty_name }}
                                    </button>
                                </tui-data-list>

                                <ng-template #facContent let-item>{{getFaculty(item)}}</ng-template>
                            </tui-select>

                            <tui-select
                                tuiTextfieldSize="m"
                                formControlName="program"
                                [valueContent]="progContent"
                            >
                                Программа
                                <input
                                    tuiTextfield
                                />
                                <tui-data-list *tuiDataList>
                                    <button
                                        *ngFor="let item of programs"
                                        tuiOption
                                        [value]="item.program_id"
                                    >
                                        {{ item.program_name }}
                                    </button>
                                </tui-data-list>
                                <ng-template #progContent let-item>{{getProgram(item)}}</ng-template>
                            </tui-select>

                        </form>
                    </ng-template>
                </tui-expand>
            </div>
        </div>
    </div>
</ng-template>